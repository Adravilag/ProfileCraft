import{r as l,j as e,v as J,w as X,x as K,y as ee,z as ae}from"./index-m9uFbhUH.js";import{H as te}from"./HeaderSection-CvKSDhmP.js";import{A as ie}from"./AdminModal-D9wWoE8G.js";import{F as se}from"./FloatingActionButtonGroup-CENcCSW2.js";const ne="_datePickerContainer_v776w_3",re="_inputContainer_v776w_8",oe="_dateInput_v776w_14",ce="_calendarButton_v776w_32",le="_calendarDropdown_v776w_56",de="_calendarHeader_v776w_84",me="_navButton_v776w_92",fe="_monthYear_v776w_112",ue="_calendarGrid_v776w_118",ge="_weekDays_v776w_122",pe="_weekDay_v776w_122",_e="_daysGrid_v776w_137",he="_dayButton_v776w_143",ye="_validDay_v776w_159",ve="_emptyDay_v776w_164",je="_selected_v776w_169",xe="_today_v776w_175",Ce="_calendarFooter_v776w_195",Ie="_todayButton_v776w_203",we="_clearButton_v776w_204",p={datePickerContainer:ne,inputContainer:re,dateInput:oe,calendarButton:ce,calendarDropdown:le,calendarHeader:de,navButton:me,monthYear:fe,calendarGrid:ue,weekDays:ge,weekDay:pe,daysGrid:_e,dayButton:he,validDay:ye,emptyDay:ve,selected:je,today:xe,calendarFooter:Ce,todayButton:Ie,clearButton:we},Ne=({value:d,onChange:_,placeholder:i="Seleccionar fecha",required:$=!1,name:I,id:E})=>{const[b,y]=l.useState(!1),[u,v]=l.useState(null),[j,S]=l.useState(new Date),[U,w]=l.useState(d),N=l.useRef(null),F=l.useRef(null);l.useEffect(()=>{if(d){const g=(L=>{const Z=L.match(/(\d{4})/);if(!Z)return null;const H=parseInt(Z[1]),P=["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],V=["january","february","march","april","may","june","july","august","september","october","november","december"],z=L.toLowerCase();let D=0;return P.forEach((R,a)=>{z.includes(R)&&(D=a)}),V.forEach((R,a)=>{z.includes(R)&&(D=a)}),new Date(H,D,1)})(d);g&&(v(g),S(g)),w(d)}},[d]),l.useEffect(()=>{const t=g=>{N.current&&!N.current.contains(g.target)&&y(!1)};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[]);const m=t=>`${["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"][t.getMonth()]} ${t.getFullYear()}`,x=t=>{v(t);const g=m(t);w(g),_(g),y(!1)},c=t=>{w(t.target.value),_(t.target.value)},M=()=>{S(new Date(j.getFullYear(),j.getMonth()+1,1))},T=()=>{S(new Date(j.getFullYear(),j.getMonth()-1,1))},o=t=>{const g=t.getFullYear(),L=t.getMonth(),Z=new Date(g,L,1),P=new Date(g,L+1,0).getDate(),V=Z.getDay(),z=[];for(let D=0;D<V;D++)z.push(null);for(let D=1;D<=P;D++)z.push(new Date(g,L,D));return z},k=t=>!t||!u?!1:t.getMonth()===u.getMonth()&&t.getFullYear()===u.getFullYear(),A=t=>{if(!t)return!1;const g=new Date;return t.getDate()===g.getDate()&&t.getMonth()===g.getMonth()&&t.getFullYear()===g.getFullYear()};return e.jsxs("div",{className:p.datePickerContainer,ref:N,children:[e.jsxs("div",{className:p.inputContainer,children:[e.jsx("input",{ref:F,type:"text",value:U,onChange:c,onFocus:()=>y(!0),placeholder:i,required:$,name:I,id:E,className:p.dateInput}),e.jsx("button",{type:"button",className:p.calendarButton,onClick:()=>y(!b),children:e.jsx("i",{className:"fas fa-calendar-alt"})})]}),b&&e.jsxs("div",{className:p.calendarDropdown,children:[e.jsxs("div",{className:p.calendarHeader,children:[e.jsx("button",{type:"button",className:p.navButton,onClick:T,children:e.jsx("i",{className:"fas fa-chevron-left"})}),e.jsx("span",{className:p.monthYear,children:m(j)}),e.jsx("button",{type:"button",className:p.navButton,onClick:M,children:e.jsx("i",{className:"fas fa-chevron-right"})})]}),e.jsxs("div",{className:p.calendarGrid,children:[e.jsx("div",{className:p.weekDays,children:["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"].map(t=>e.jsx("div",{className:p.weekDay,children:t},t))}),e.jsx("div",{className:p.daysGrid,children:o(j).map((t,g)=>e.jsx("button",{type:"button",className:`${p.dayButton} ${t?p.validDay:p.emptyDay} ${t&&k(t)?p.selected:""} ${t&&A(t)?p.today:""}`,onClick:()=>t&&x(t),disabled:!t,children:t==null?void 0:t.getDate()},g))})]}),e.jsxs("div",{className:p.calendarFooter,children:[e.jsx("button",{type:"button",className:p.todayButton,onClick:()=>x(new Date),children:"Hoy"}),e.jsx("button",{type:"button",className:p.clearButton,onClick:()=>{v(null),w(""),_(""),y(!1)},children:"Limpiar"})]})]})]})},be=[{id:"aws",name:"Amazon Web Services (AWS)",logoUrl:"/assets/images/certification-logos/aws.svg",verifyBaseUrl:"https://www.credly.com/badges/",category:"cloud",description:"Certificaciones de servicios en la nube de Amazon"},{id:"microsoft",name:"Microsoft Azure",logoUrl:"/assets/images/certification-logos/microsoft.svg",verifyBaseUrl:"https://learn.microsoft.com/en-us/users/",category:"cloud",description:"Certificaciones de Microsoft Azure y tecnologías relacionadas"},{id:"google-cloud",name:"Google Cloud Platform",logoUrl:"/assets/images/certification-logos/google-cloud.svg",verifyBaseUrl:"https://www.credential.net/profile/",category:"cloud",description:"Certificaciones de Google Cloud Platform"},{id:"sololearn",name:"SoloLearn",logoUrl:"/assets/images/certification-logos/sololearn.png",verifyBaseUrl:"https://www.sololearn.com/certificates/",certificateImageUrl:"https://api2.sololearn.com/v2/certificates/{credentialId}/image/pdf",category:"programming",description:"Certificaciones de programación y desarrollo web"},{id:"codecademy",name:"Codecademy",logoUrl:"/assets/images/certification-logos/codecademy.svg",verifyBaseUrl:"https://www.codecademy.com/profiles/",category:"programming",description:"Certificaciones de programación y ciencias de datos"},{id:"freecodecamp",name:"freeCodeCamp",logoUrl:"/assets/images/certification-logos/freecodecamp.svg",verifyBaseUrl:"https://www.freecodecamp.org/certification/",category:"programming",description:"Certificaciones gratuitas de desarrollo web y programación"},{id:"udemy",name:"Udemy",logoUrl:"/assets/images/certification-logos/udemy.svg",verifyBaseUrl:"https://www.udemy.com/certificate/",category:"programming",description:"Certificaciones de cursos en línea"},{id:"coursera",name:"Coursera",logoUrl:"/assets/images/certification-logos/coursera.svg",verifyBaseUrl:"https://www.coursera.org/account/accomplishments/certificate/",category:"programming",description:"Certificaciones universitarias y profesionales"},{id:"oracle",name:"Oracle",logoUrl:"/assets/images/certifications/oracle-logo.png",verifyBaseUrl:"https://catalog-education.oracle.com/pls/certview/sharebadge?id=",category:"database",description:"Certificaciones de Oracle Database y tecnologías Java"},{id:"mongodb",name:"MongoDB",logoUrl:"/assets/images/certifications/mongodb-logo.png",verifyBaseUrl:"https://university.mongodb.com/certification/verify/",category:"database",description:"Certificaciones de MongoDB y NoSQL"},{id:"cisco",name:"Cisco",logoUrl:"/assets/images/certifications/cisco-logo.png",verifyBaseUrl:"https://www.cisco.com/c/en/us/training-events/training-certifications/certifications/verify.html",category:"security",description:"Certificaciones de redes y ciberseguridad"},{id:"comptia",name:"CompTIA",logoUrl:"/assets/images/certifications/comptia-logo.png",verifyBaseUrl:"https://www.certmetrics.com/comptia/public/verification.aspx",category:"security",description:"Certificaciones de TI y ciberseguridad"},{id:"adobe",name:"Adobe",logoUrl:"/assets/images/certifications/adobe-logo.png",verifyBaseUrl:"https://www.adobe.com/training/certification/verification.html",category:"design",description:"Certificaciones de diseño gráfico y multimedia"},{id:"figma",name:"Figma",logoUrl:"/assets/images/certifications/figma-logo.png",category:"design",description:"Certificaciones de diseño UX/UI"},{id:"pmi",name:"Project Management Institute (PMI)",logoUrl:"/assets/images/certifications/pmi-logo.png",verifyBaseUrl:"https://www.pmi.org/certifications/certification-registry",category:"project-management",description:"Certificaciones de gestión de proyectos"},{id:"scrum",name:"Scrum.org",logoUrl:"/assets/images/certifications/scrum-logo.png",verifyBaseUrl:"https://www.scrum.org/user/",category:"project-management",description:"Certificaciones de metodologías ágiles y Scrum"},{id:"linkedin",name:"LinkedIn Learning",logoUrl:"/assets/images/certification-logos/linkedin.svg",verifyBaseUrl:"https://www.linkedin.com/learning/certificates/",category:"other",description:"Certificaciones profesionales de LinkedIn"},{id:"edx",name:"edX",logoUrl:"/assets/images/certifications/edx-logo.png",verifyBaseUrl:"https://courses.edx.org/certificates/",category:"other",description:"Certificaciones universitarias en línea"},{id:"platzi",name:"Platzi",logoUrl:"/assets/images/certifications/platzi-logo.png",verifyBaseUrl:"https://platzi.com/p/",category:"programming",description:"Certificaciones de tecnología en español"}],O=(d,_)=>{if(!(!d.verifyBaseUrl||!_))return`${d.verifyBaseUrl}${_}`},Y=(d,_)=>{if(!(!d.certificateImageUrl||!_))return d.certificateImageUrl.replace("{credentialId}",_)},De=(d,_)=>{if(!_||!_.trim())return!1;const i=_.trim();switch(d.id){case"aws":return/^[A-Za-z0-9-]{8,50}$/.test(i);case"microsoft":return/^[A-Za-z0-9-]{10,40}$/.test(i);case"google-cloud":return/^[A-Za-z0-9-]{10,40}$/.test(i);case"sololearn":return/^CT-[A-Z0-9]{6,20}$/.test(i);case"codecademy":return/^[A-Za-z0-9]{6,30}$/.test(i);case"freecodecamp":return/^[a-zA-Z0-9_-]+\/[a-zA-Z0-9_-]+$/.test(i);case"udemy":return/^[A-Z0-9]{10,30}$/.test(i);case"coursera":return/^[A-Za-z0-9-]{10,40}$/.test(i);case"oracle":return/^[A-Z0-9]{8,25}$/.test(i);case"mongodb":return/^[A-Za-z0-9]{8,30}$/.test(i);case"cisco":return/^[A-Z0-9]{10,25}$/.test(i);case"comptia":return/^[A-Z0-9]{8,20}$/.test(i);case"linkedin":return/^[A-Za-z0-9]{8,40}$/.test(i);case"platzi":return/^[a-zA-Z0-9_-]+\/[a-zA-Z0-9_-]+$/.test(i);default:return/^[A-Za-z0-9-_]{6,50}$/.test(i)}},q=d=>{switch(d.id){case"aws":return"Ej: ABC123DEF456";case"microsoft":return"Ej: MC-123456-789";case"google-cloud":return"Ej: GCP123456789";case"sololearn":return"Ej: CT-SBWD5KGG";case"codecademy":return"Ej: ABC123XYZ789";case"freecodecamp":return"Ej: usuario/responsive-web-design";case"udemy":return"Ej: UC-12345678";case"coursera":return"Ej: ABCD1234EFGH";case"oracle":return"Ej: 1Z0-123456";case"mongodb":return"Ej: MDB123456";case"cisco":return"Ej: CSCO12345678";case"comptia":return"Ej: COMP123456";case"linkedin":return"Ej: AaBbCcDdEeFf";case"platzi":return"Ej: usuario/certificado-react";default:return"Ej: ABC123XYZ789"}},W=[{id:"all",name:"Todas las categorías"},{id:"cloud",name:"Cloud Computing"},{id:"programming",name:"Programación"},{id:"database",name:"Bases de Datos"},{id:"security",name:"Ciberseguridad"},{id:"design",name:"Diseño"},{id:"project-management",name:"Gestión de Proyectos"},{id:"other",name:"Otros"}],Be="_issuerSelectorContainer_7z00y_3",Se="_inputContainer_7z00y_8",Ue="_issuerInput_7z00y_14",ke="_inputButtons_7z00y_32",Ae="_clearButton_7z00y_41",Ee="_dropdownButton_7z00y_42",Fe="_rotated_7z00y_68",Me="_dropdownContainer_7z00y_72",Le="_categoryFilters_7z00y_102",ze="_filterLabel_7z00y_108",$e="_categoryButtons_7z00y_115",Ve="_categoryButton_7z00y_115",Ge="_active_7z00y_139",Te="_issuersList_7z00y_145",Ze="_noResults_7z00y_151",Pe="_issuerOption_7z00y_177",Re="_hovered_7z00y_192",He="_issuerLogo_7z00y_200",Oe="_logoFallback_7z00y_218",Ye="_issuerInfo_7z00y_229",We="_issuerName_7z00y_234",Qe="_issuerDescription_7z00y_244",qe="_issuerCategory_7z00y_254",Je="_selectIcon_7z00y_263",Xe="_dropdownFooter_7z00y_284",f={issuerSelectorContainer:Be,inputContainer:Se,issuerInput:Ue,inputButtons:ke,clearButton:Ae,dropdownButton:Ee,rotated:Fe,dropdownContainer:Me,categoryFilters:Le,filterLabel:ze,categoryButtons:$e,categoryButton:Ve,active:Ge,issuersList:Te,noResults:Ze,issuerOption:Pe,hovered:Re,issuerLogo:He,logoFallback:Oe,issuerInfo:Ye,issuerName:We,issuerDescription:Qe,issuerCategory:qe,selectIcon:Je,dropdownFooter:Xe},Ke=({value:d,onChange:_,placeholder:i="Seleccionar emisor",required:$=!1,name:I,id:E})=>{const[b,y]=l.useState(!1),[u,v]=l.useState(d),[j,S]=l.useState("all"),[U,w]=l.useState(null),N=l.useRef(null),F=l.useRef(null),m=be.filter(o=>{const k=o.name.toLowerCase().includes(u.toLowerCase())||o.id.toLowerCase().includes(u.toLowerCase()),A=j==="all"||o.category===j;return k&&A});l.useEffect(()=>{const o=k=>{N.current&&!N.current.contains(k.target)&&y(!1)};return document.addEventListener("mousedown",o),()=>document.removeEventListener("mousedown",o)},[]);const x=o=>{v(o.name),_(o),y(!1)},c=o=>{v(o.target.value),b||y(!0)},M=()=>{y(!0)},T=()=>{v(""),_({})};return e.jsxs("div",{className:f.issuerSelectorContainer,ref:N,children:[e.jsxs("div",{className:f.inputContainer,children:[e.jsx("input",{ref:F,type:"text",value:u,onChange:c,onFocus:M,placeholder:i,required:$,name:I,id:E,className:f.issuerInput,autoComplete:"off"}),e.jsxs("div",{className:f.inputButtons,children:[u&&e.jsx("button",{type:"button",className:f.clearButton,onClick:T,title:"Limpiar selección",children:e.jsx("i",{className:"fas fa-times"})}),e.jsx("button",{type:"button",className:f.dropdownButton,onClick:()=>y(!b),title:"Abrir selector",children:e.jsx("i",{className:`fas fa-chevron-down ${b?f.rotated:""}`})})]})]}),b&&e.jsxs("div",{className:f.dropdownContainer,children:[e.jsxs("div",{className:f.categoryFilters,children:[e.jsx("div",{className:f.filterLabel,children:"Categorías:"}),e.jsx("div",{className:f.categoryButtons,children:W.map(o=>e.jsx("button",{type:"button",className:`${f.categoryButton} ${j===o.id?f.active:""}`,onClick:()=>S(o.id),children:o.name},o.id))})]}),e.jsx("div",{className:f.issuersList,children:m.length===0?e.jsxs("div",{className:f.noResults,children:[e.jsx("i",{className:"fas fa-search"}),e.jsx("p",{children:"No se encontraron emisores"}),e.jsx("small",{children:"Prueba con otro término de búsqueda o categoría"})]}):m.map(o=>{var k;return e.jsxs("button",{type:"button",className:`${f.issuerOption} ${U===o.id?f.hovered:""}`,onClick:()=>x(o),onMouseEnter:()=>w(o.id),onMouseLeave:()=>w(null),children:[e.jsxs("div",{className:f.issuerLogo,children:[e.jsx("img",{src:o.logoUrl,alt:`${o.name} logo`,onError:A=>{A.target.style.display="none";const t=A.target.nextElementSibling;t&&(t.style.display="flex")}}),e.jsx("div",{className:f.logoFallback,children:e.jsx("i",{className:"fas fa-certificate"})})]}),e.jsxs("div",{className:f.issuerInfo,children:[e.jsx("div",{className:f.issuerName,children:o.name}),o.description&&e.jsx("div",{className:f.issuerDescription,children:o.description}),e.jsxs("div",{className:f.issuerCategory,children:[e.jsx("i",{className:"fas fa-tag"}),(k=W.find(A=>A.id===o.category))==null?void 0:k.name]})]}),e.jsx("div",{className:f.selectIcon,children:e.jsx("i",{className:"fas fa-plus"})})]},o.id)})}),e.jsx("div",{className:f.dropdownFooter,children:e.jsxs("small",{children:[e.jsx("i",{className:"fas fa-info-circle"}),"Se cargarán automáticamente el logo y URL de verificación"]})})]})]})},ea="_credentialInputContainer_ms5xh_3",aa="_inputWrapper_ms5xh_7",ta="_credentialInput_ms5xh_3",ia="_checking_ms5xh_37",sa="_valid_ms5xh_42",na="_invalid_ms5xh_48",ra="_statusContainer_ms5xh_55",oa="_statusIcon_ms5xh_63",ca="_validIcon_ms5xh_68",la="_invalidIcon_ms5xh_73",da="_helpText_ms5xh_102",ma="_verifyContainer_ms5xh_111",fa="_verifyLink_ms5xh_116",ua="_errorContainer_ms5xh_142",C={credentialInputContainer:ea,inputWrapper:aa,credentialInput:ta,checking:ia,valid:sa,invalid:na,statusContainer:ra,statusIcon:oa,validIcon:ca,invalidIcon:la,helpText:da,verifyContainer:ma,verifyLink:fa,errorContainer:ua},ga=({value:d,onChange:_,issuer:i,placeholder:$="ID de Credencial"})=>{const[I,E]=l.useState(null),[b,y]=l.useState(!1),[u,v]=l.useState();l.useEffect(()=>{if(!d.trim()||!i){E(null),v(void 0);return}y(!0);const w=setTimeout(()=>{const N=De(i,d);if(E(N),N){const F=O(i,d);v(F)}else v(void 0);y(!1)},800);return()=>clearTimeout(w)},[d,i]);const j=w=>{_(w.target.value)},S=()=>b?C.checking:I===!0?C.valid:I===!1?C.invalid:"",U=()=>b?e.jsx("i",{className:`fas fa-spinner fa-spin ${C.statusIcon}`}):I===!0?e.jsx("i",{className:`fas fa-check-circle ${C.statusIcon} ${C.validIcon}`}):I===!1?e.jsx("i",{className:`fas fa-times-circle ${C.statusIcon} ${C.invalidIcon}`}):null;return e.jsxs("div",{className:C.credentialInputContainer,children:[e.jsxs("div",{className:`${C.inputWrapper} ${S()}`,children:[e.jsx("input",{type:"text",value:d,onChange:j,placeholder:i?q(i):$,className:C.credentialInput}),e.jsx("div",{className:C.statusContainer,children:U()})]}),i&&e.jsx("div",{className:C.helpText,children:q(i)}),I===!0&&u&&e.jsx("div",{className:C.verifyContainer,children:e.jsxs("a",{href:u,target:"_blank",rel:"noopener noreferrer",className:C.verifyLink,children:[e.jsx("i",{className:"fas fa-external-link-alt"}),e.jsx("span",{children:"Verificar certificación"})]})}),I===!1&&d.trim()&&e.jsxs("div",{className:C.errorContainer,children:[e.jsx("i",{className:"fas fa-exclamation-triangle"}),e.jsxs("span",{children:["Formato de credencial no válido para ",i==null?void 0:i.name]})]})]})},pa="_certificationsGrid_bojfs_61",_a="_certificationCard_bojfs_69",ha="_certImage_bojfs_141",ya="_certContent_bojfs_198",va="_certTitle_bojfs_206",ja="_certIssuer_bojfs_220",xa="_certDetails_bojfs_235",Ca="_certDate_bojfs_243",Ia="_certId_bojfs_244",wa="_certActions_bojfs_278",Na="_certVerifyBtn_bojfs_292",ba="_certBadge_bojfs_372",Da="_loadingState_bojfs_420",Ba="_loadingSpinner_bojfs_428",Sa="_emptyState_bojfs_448",Ua="_emptyIcon_bojfs_462",ka="_emptyTitle_bojfs_479",Aa="_emptyDescription_bojfs_487",h={certificationsGrid:pa,certificationCard:_a,certImage:ha,certContent:ya,certTitle:va,certIssuer:ja,certDetails:xa,certDate:Ca,certId:Ia,certActions:wa,certVerifyBtn:Na,certBadge:ba,loadingState:Da,loadingSpinner:Ba,emptyState:Sa,emptyIcon:Ua,emptyTitle:ka,emptyDescription:Aa},Ea="_adminEmpty_vgc10_4",Fa="_adminItemsList_vgc10_21",Ma="_adminItemCard_vgc10_28",La="_adminItemHeader_vgc10_43",za="_adminItemImage_vgc10_48",$a="_adminPlaceholderImage_vgc10_60",Va="_adminItemInfo_vgc10_76",Ga="_adminItemSubtitle_vgc10_87",Ta="_adminCertMetadata_vgc10_93",Za="_adminItemDate_vgc10_102",Pa="_adminItemCredential_vgc10_103",Ra="_adminItemVerify_vgc10_104",Ha="_adminVerifyLink_vgc10_110",Oa="_adminItemActions_vgc10_131",Ya="_adminBtnSecondary_vgc10_137",Wa="_adminBtnDanger_vgc10_138",Qa="_adminForm_vgc10_171",qa="_adminFormRow_vgc10_178",Ja="_adminFormGroup_vgc10_184",Xa="_adminLoading_vgc10_208",Ka="_adminModalContent_vgc10_214",et="_issuerPreview_vgc10_219",at="_previewContent_vgc10_293",tt="_previewLogo_vgc10_301",it="_previewInfo_vgc10_376",st="_previewName_vgc10_383",nt="_previewDescription_vgc10_396",rt="_previewDetails_vgc10_405",ot="_previewCategory_vgc10_412",ct="_previewVerify_vgc10_413",n={adminEmpty:Ea,adminItemsList:Fa,adminItemCard:Ma,adminItemHeader:La,adminItemImage:za,adminPlaceholderImage:$a,adminItemInfo:Va,adminItemSubtitle:Ga,adminCertMetadata:Ta,adminItemDate:Za,adminItemCredential:Pa,adminItemVerify:Ra,adminVerifyLink:Ha,adminItemActions:Oa,adminBtnSecondary:Ya,adminBtnDanger:Wa,adminForm:Qa,adminFormRow:qa,adminFormGroup:Ja,adminLoading:Xa,adminModalContent:Ka,issuerPreview:et,previewContent:at,previewLogo:tt,previewInfo:it,previewName:st,previewDescription:nt,previewDetails:rt,previewCategory:ot,previewVerify:ct},ut=({isAdminMode:d=!1,showAdminFAB:_=!1})=>{const[i,$]=l.useState([]),[I,E]=l.useState(!0),[b,y]=l.useState(!1),[u,v]=l.useState(!1),[j,S]=l.useState(null),[U,w]=l.useState(!1),{showSuccess:N,showError:F}=J(),[m,x]=l.useState({title:"",issuer:"",date:"",credential_id:"",image_url:"",order_index:0}),[c,M]=l.useState(null),T={title:"",issuer:"",date:"",credential_id:"",image_url:"",order_index:0},o=async()=>{try{E(!0),console.log("Iniciando carga de certificaciones...");const a=await X();console.log("Datos recibidos de la API:",a);const s=a.map(r=>({id:r.id,title:r.title,issuer:r.issuer,date:r.date,credentialId:r.credential_id,image:r.image_url||"/assets/images/foto-perfil.jpg",verifyUrl:r.verify_url}));console.log("Datos mapeados:",s),$(s)}catch(a){console.error("Error cargando certificaciones:",a)}finally{E(!1)}};l.useEffect(()=>{o()},[]);const k=()=>{y(!1),o()},A=a=>{const{name:s,value:r}=a.target;x(B=>({...B,[s]:s==="order_index"?parseInt(r)||0:r}))},t=a=>{x(s=>({...s,date:a}))},g=a=>{if(a.name){if(M(a),x(s=>({...s,issuer:a.name,image_url:a.logoUrl||s.image_url})),m.credential_id&&m.credential_id.trim()){if(a.verifyBaseUrl){const s=O(a,m.credential_id);s&&x(r=>({...r,verify_url:s}))}if(a.certificateImageUrl){const s=Y(a,m.credential_id);s&&x(r=>({...r,image_url:s}))}}}else M(null),x(s=>({...s,issuer:"",image_url:"",verify_url:""}))},L=async a=>{if(a.preventDefault(),!m.title.trim()||!m.issuer.trim()||!m.date.trim()){F("Error de validación","Título, emisor y fecha son obligatorios");return}try{w(!0);let s="",r=m.image_url;if(c&&m.credential_id.trim()){const G=O(c,m.credential_id);if(G&&(s=G),c.certificateImageUrl){const Q=Y(c,m.credential_id);Q&&(r=Q)}}else c&&!m.credential_id.trim()&&(r=c.logoUrl||m.image_url);const B={...m,image_url:r,verify_url:s||void 0,user_id:1,order_index:m.order_index||i.length};j?(await K(j,B),N("Certificación actualizada","Los cambios se han guardado correctamente")):(await ee(B),N("Certificación creada","La nueva certificación se ha añadido correctamente")),await o(),P()}catch(s){console.error("Error guardando certificación:",s),F("Error","No se pudo guardar la certificación")}finally{w(!1)}},Z=a=>{console.log("🔧 handleEditCertification called with:",a),x({title:a.title,issuer:a.issuer,date:a.date,credential_id:a.credential_id||"",image_url:a.image_url||"",order_index:a.order_index}),S(a.id),v(!0),console.log("🔧 handleEditCertification - Form set, showForm set to true")},H=async(a,s)=>{if(console.log("🔧 handleDeleteCertification called with:",a,s),!confirm(`¿Estás seguro de eliminar la certificación "${s}"?`)){console.log("🔧 handleDeleteCertification - User cancelled");return}try{console.log("🔧 handleDeleteCertification - Deleting..."),await ae(a),N("Certificación eliminada","La certificación se ha eliminado correctamente"),await o(),console.log("🔧 handleDeleteCertification - Successfully deleted and reloaded")}catch(r){console.error("Error eliminando certificación:",r),F("Error","No se pudo eliminar la certificación")}},P=()=>{v(!1),x(T),S(null),M(null)},V=()=>{console.log("🔧 handleNewCertification - Button clicked!"),console.log("🔧 handleNewCertification - Current certifications.length:",i.length),x({...T,order_index:i.length}),S(null),M(null),v(!0),console.log("🔧 handleNewCertification - showForm set to true")},z=()=>i.length===0?e.jsxs("div",{className:n.adminEmpty,children:[e.jsx("i",{className:"fas fa-certificate"}),e.jsx("h3",{children:"No hay certificaciones"}),e.jsx("p",{children:"Añade la primera certificación usando el botón flotante."})]}):e.jsx("div",{className:n.adminItemsList,children:i.map(a=>e.jsxs("div",{className:n.adminItemCard,children:["            ",e.jsxs("div",{className:n.adminItemHeader,children:[e.jsx("div",{className:n.adminItemImage,children:a.image?e.jsx("img",{src:a.image,alt:a.title,onError:s=>{s.target.src="/assets/images/foto-perfil.jpg"}}):e.jsx("div",{className:n.adminPlaceholderImage,children:e.jsx("i",{className:"fas fa-certificate"})})}),e.jsxs("div",{className:n.adminItemInfo,children:[e.jsx("h3",{children:a.title}),e.jsx("p",{className:n.adminItemSubtitle,children:a.issuer}),e.jsxs("div",{className:n.adminCertMetadata,children:[e.jsxs("div",{className:n.adminItemDate,children:[e.jsx("i",{className:"fas fa-calendar-alt"}),e.jsx("span",{children:a.date})]}),a.credentialId&&e.jsxs("div",{className:n.adminItemCredential,children:[e.jsx("i",{className:"fas fa-id-card"}),e.jsxs("span",{children:["ID: ",a.credentialId]})]}),a.verifyUrl&&e.jsx("div",{className:n.adminItemVerify,children:e.jsxs("a",{href:a.verifyUrl,target:"_blank",rel:"noopener noreferrer",className:n.adminVerifyLink,title:"Verificar certificación",children:[e.jsx("i",{className:"fas fa-external-link-alt"}),e.jsx("span",{children:"Verificar"})]})})]})]})]}),e.jsxs("div",{className:n.adminItemActions,children:[e.jsxs("button",{className:n.adminBtnSecondary,onClick:()=>{console.log("🔧 Edit button clicked for cert:",a),Z({id:a.id,title:a.title,issuer:a.issuer,date:a.date,credential_id:a.credentialId||"",image_url:a.image||"",verify_url:a.verifyUrl||"",order_index:a.id,user_id:1})},children:[e.jsx("i",{className:"fas fa-edit"}),"Editar"]}),e.jsxs("button",{className:n.adminBtnDanger,onClick:()=>{console.log("🔧 Delete button clicked for cert:",a.id,a.title),H(a.id,a.title)},children:[e.jsx("i",{className:"fas fa-trash"}),"Eliminar"]})]})]},a.id))}),D=()=>{var a;return e.jsx("div",{children:e.jsxs("form",{onSubmit:L,className:`${n.adminForm} admin-form`,children:[e.jsxs("div",{className:n.adminFormRow,children:[e.jsxs("div",{className:n.adminFormGroup,children:[e.jsx("label",{htmlFor:"cert-title",children:"Título *"}),e.jsx("input",{type:"text",id:"cert-title",name:"title",value:m.title,onChange:A,required:!0,placeholder:"Ej: AWS Solutions Architect"})]}),e.jsxs("div",{className:n.adminFormGroup,children:[e.jsx("label",{htmlFor:"cert-issuer",children:"Emisor *"}),e.jsx(Ke,{id:"cert-issuer",name:"issuer",value:m.issuer,onChange:g,required:!0,placeholder:"Buscar o seleccionar emisor..."})]})]}),e.jsxs("div",{className:n.adminFormRow,children:[e.jsxs("div",{className:n.adminFormGroup,children:[e.jsx("label",{htmlFor:"cert-date",children:"Fecha *"}),e.jsx(Ne,{id:"cert-date",name:"date",value:m.date,onChange:t,required:!0,placeholder:"Seleccionar fecha de emisión"})]}),e.jsxs("div",{className:n.adminFormGroup,children:[e.jsx("label",{htmlFor:"cert-credential",children:"ID de Credencial"}),e.jsx(ga,{value:m.credential_id,onChange:s=>{if(x(r=>({...r,credential_id:s})),c&&s.trim()){if(c.verifyBaseUrl){const r=O(c,s);r&&x(B=>({...B,verify_url:r}))}if(c.certificateImageUrl){const r=Y(c,s);r&&x(B=>({...B,image_url:r}))}}else s.trim()||x(r=>({...r,verify_url:"",image_url:(c==null?void 0:c.logoUrl)||""}))},issuer:c,placeholder:"ID de credencial"})]})]}),c&&e.jsxs("div",{className:n.issuerPreview,children:[e.jsxs("div",{className:n.previewHeader,children:[e.jsx("i",{className:"fas fa-eye"}),e.jsx("span",{children:"Vista previa del emisor seleccionado"})]}),e.jsxs("div",{className:n.previewContent,children:[e.jsx("div",{className:n.previewLogo,children:e.jsx("img",{src:c.logoUrl,alt:`${c.name} logo`,onError:s=>{const r=s.target;r.style.display="none";const B=r.parentElement;if(B&&!B.querySelector(".logo-fallback")){const G=document.createElement("div");G.className="logo-fallback",G.innerHTML='<i class="fas fa-certificate"></i>',G.style.cssText=`
                          display: flex;
                          align-items: center;
                          justify-content: center;
                          width: 100%;
                          height: 100%;
                          color: var(--md-sys-color-on-surface-variant);
                          font-size: 1.5rem;
                          opacity: 0.7;
                        `,B.appendChild(G)}}})}),e.jsxs("div",{className:n.previewInfo,children:[e.jsx("div",{className:n.previewName,children:c.name}),c.description&&e.jsx("div",{className:n.previewDescription,children:c.description}),e.jsxs("div",{className:n.previewDetails,children:[e.jsxs("span",{className:n.previewCategory,children:[e.jsx("i",{className:"fas fa-tag"}),((a=W.find(s=>s.id===c.category))==null?void 0:a.name)||c.category]}),c.verifyBaseUrl&&e.jsxs("span",{className:n.previewVerify,children:[e.jsx("i",{className:"fas fa-shield-check"}),"Verificación automática disponible"]}),c.logoUrl&&e.jsxs("span",{className:n.previewCategory,style:{background:"var(--md-sys-color-tertiary-container)",color:"var(--md-sys-color-on-tertiary-container)"},children:[e.jsx("i",{className:"fas fa-image"}),"Logo automático"]}),c.certificateImageUrl&&e.jsxs("span",{className:n.previewVerify,style:{background:"var(--md-sys-color-success-container)",color:"var(--md-sys-color-on-success-container)"},children:[e.jsx("i",{className:"fas fa-certificate"}),"Imagen de certificado"]})]})]})]})]})]})})},R=()=>(console.log("🔧 AdminModal - Rendering content..."),console.log("🔧 AdminModal - loading:",I),console.log("🔧 AdminModal - showForm:",u),console.log("🔧 AdminModal - certifications.length:",i.length),console.log("🔧 AdminModal - certifications:",i),I?(console.log("🔧 AdminModal - Mostrando loading..."),e.jsxs("div",{className:n.adminLoading,children:[e.jsx("i",{className:"fas fa-spinner fa-spin"}),e.jsx("p",{children:"Cargando certificaciones..."})]})):u?(console.log("🔧 AdminModal - Mostrando formulario..."),D()):(console.log("🔧 AdminModal - Mostrando lista..."),z()));return e.jsxs("section",{className:"section-cv",id:"certifications",children:[e.jsx(te,{icon:"fas fa-certificate",title:"Certificaciones",subtitle:"Credenciales y certificaciones profesionales obtenidas",className:"certifications"}),e.jsxs("div",{className:"section-container",children:[I?e.jsx("div",{className:h.loadingState,children:e.jsxs("div",{className:h.loadingSpinner,children:[e.jsx("i",{className:"fas fa-spinner fa-spin"}),e.jsx("p",{children:"Cargando certificaciones..."})]})}):e.jsxs("div",{className:h.sectionContainer,children:[e.jsx("div",{className:h.certificationsGrid,children:i.map((a,s)=>e.jsxs("div",{className:h.certificationCard,style:{animationDelay:`${s*.1}s`},children:[e.jsx("div",{className:h.certImage,children:e.jsx("img",{src:a.image,alt:a.title,onError:r=>{r.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCA2NCA2NCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjY0IiBoZWlnaHQ9IjY0IiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zMiAyMEwyNiAyNkgzOEwzMiAyMFoiIGZpbGw9IiM5Q0E0QUYiLz4KPHBhdGggZD0iTTQ0IDM4SDIwVjQySDQ0VjM4WiIgZmlsbD0iIzlDQTRBRiIvPgo8L3N2Zz4K"}})}),e.jsxs("div",{className:h.certContent,children:[e.jsx("h3",{className:h.certTitle,children:a.title}),e.jsx("p",{className:h.certIssuer,children:a.issuer}),e.jsxs("div",{className:h.certDetails,children:[e.jsxs("div",{className:h.certDate,children:[e.jsx("i",{className:"fas fa-calendar-alt"}),e.jsx("span",{children:a.date})]}),a.credentialId&&e.jsxs("div",{className:h.certId,children:[e.jsx("i",{className:"fas fa-id-badge"}),e.jsxs("span",{children:["ID: ",a.credentialId]})]})]}),e.jsx("div",{className:h.certActions,children:a.verifyUrl?e.jsxs("a",{href:a.verifyUrl,target:"_blank",rel:"noopener noreferrer",className:h.certVerifyBtn,title:"Verificar certificación",children:[e.jsx("i",{className:"fas fa-check-circle"}),e.jsx("span",{children:"Verificar"})]}):e.jsxs("button",{className:h.certVerifyBtn,title:"Verificar certificación",children:[e.jsx("i",{className:"fas fa-check-circle"}),e.jsx("span",{children:"Verificar"})]})})]}),e.jsx("div",{className:h.certBadge,children:e.jsx("i",{className:"fas fa-award"})})]},a.id))}),i.length===0&&e.jsxs("div",{className:h.emptyState,children:[e.jsx("div",{className:h.emptyIcon,children:e.jsx("i",{className:"fas fa-certificate"})}),e.jsx("h3",{className:h.emptyTitle,children:"No hay certificaciones disponibles"}),e.jsx("p",{className:h.emptyDescription,children:"Las certificaciones aparecerán aquí cuando estén disponibles."})]})]}),"      ",!d&&_&&e.jsx(se,{actions:[{id:"admin-certifications",onClick:()=>{console.log("Admin button clicked"),y(!0)},icon:"fas fa-shield-alt",label:"Administrar Certificaciones",color:"primary"},{id:"add-certification",onClick:()=>{console.log("Add certification button clicked"),v(!0),y(!0),V()},icon:"fas fa-plus",label:"Añadir Certificación",color:"success"}],position:"bottom-right"})]}),b&&e.jsx(ie,{isOpen:b,onClose:k,title:"Administrar Certificaciones",icon:"fas fa-certificate",tabs:[{id:"list",label:"Listado",icon:"fas fa-list",content:null,badge:i.length.toString()},{id:"form",label:u&&j?"Editar":"Nueva",icon:u&&j?"fas fa-edit":"fas fa-plus",content:null,disabled:!u}],activeTab:u?"form":"list",onTabChange:a=>{a==="list"&&u?v(!1):a==="form"&&!u&&V()},showTabs:!0,floatingActions:u?[{id:"cancel-cert",label:"Cancelar",icon:"fas fa-times",variant:"secondary",onClick:()=>v(!1)},{id:"save-cert",label:U?"Guardando...":j?"Guardar Cambios":"Crear Certificación",icon:U?"fas fa-spinner fa-spin":"fas fa-save",variant:"primary",onClick:()=>{const a=document.querySelector(".admin-form");a&&a.requestSubmit()},disabled:U,loading:U}]:[{id:"new-cert",label:"Nueva Certificación",icon:"fas fa-plus",variant:"primary",onClick:V}],children:e.jsx("div",{className:n.adminModalContent,children:R()})})]})};export{ut as default};
