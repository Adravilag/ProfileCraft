<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prueba directa de iframe YouTube</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        
        .test-container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        .iframe-container {
            position: relative;
            width: 100%;
            height: 315px;
            margin: 20px 0;
        }
        
        iframe {
            width: 100%;
            height: 100%;
            border: none;
            border-radius: 8px;
        }
        
        .info {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #2196f3;
        }
        
        .error {
            background: #ffebee;
            color: #c62828;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #f44336;
        }
        
        .success {
            background: #e8f5e8;
            color: #2e7d32;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #4caf50;
        }
        
        .browser-info {
            background: #f3e5f5;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #9c27b0;
            font-family: monospace;
            font-size: 12px;
        }
        
        button {
            background: #2196f3;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        
        button:hover {
            background: #1976d2;
        }
    </style>
</head>
<body>
    <h1>üé• Prueba Directa de iframe YouTube</h1>
    
    <div class="test-container">
        <h2>Informaci√≥n del Navegador</h2>
        <div class="browser-info" id="browserInfo">
            Cargando informaci√≥n del navegador...
        </div>
    </div>
    
    <div class="test-container">
        <h2>Video de Prueba: zzTkOM-wJpo</h2>
        <div class="info">
            <strong>URL original:</strong> https://www.youtube.com/watch?v=zzTkOM-wJpo<br>
            <strong>URL embed:</strong> https://www.youtube.com/embed/zzTkOM-wJpo<br>
            <strong>Estado:</strong> <span id="iframeStatus">‚è≥ Cargando...</span>
        </div>
        
        <div class="iframe-container">
            <iframe 
                id="testIframe"
                src="https://www.youtube.com/embed/zzTkOM-wJpo"
                title="Video de prueba zzTkOM-wJpo"
                frameborder="0"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                allowfullscreen>
            </iframe>
        </div>
        
        <div id="statusContainer"></div>
        
        <button onclick="reloadIframe()">üîÑ Recargar iframe</button>
        <button onclick="openInNewTab()">üîó Abrir en nueva pesta√±a</button>
        <button onclick="testDifferentUrl()">üéØ Probar URL alternativa</button>
    </div>
    
    <div class="test-container">
        <h2>Prueba con Par√°metros Optimizados</h2>
        <div class="info">
            <strong>URL optimizada:</strong> <span id="optimizedUrl">Generando...</span><br>
            <strong>Estado:</strong> <span id="optimizedStatus">‚è≥ Cargando...</span>
        </div>
        
        <div class="iframe-container">
            <iframe 
                id="optimizedIframe"
                title="Video con par√°metros optimizados"
                frameborder="0"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                allowfullscreen>
            </iframe>
        </div>
    </div>
    
    <div class="test-container">
        <h2>Prueba con Rick Roll (video popular)</h2>
        <div class="info">
            <strong>Video ID:</strong> dQw4w9WgXcQ<br>
            <strong>Estado:</strong> <span id="rickrollStatus">‚è≥ Cargando...</span>
        </div>
        
        <div class="iframe-container">
            <iframe 
                id="rickrollIframe"
                src="https://www.youtube.com/embed/dQw4w9WgXcQ"
                title="Rick Roll de prueba"
                frameborder="0"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                allowfullscreen>
            </iframe>
        </div>
    </div>

    <script>
        // Informaci√≥n del navegador
        function updateBrowserInfo() {
            const info = {
                userAgent: navigator.userAgent,
                platform: navigator.platform,
                language: navigator.language,
                cookieEnabled: navigator.cookieEnabled,
                onLine: navigator.onLine,
                vendor: navigator.vendor,
                isEdge: /Edg/i.test(navigator.userAgent),
                isChrome: /Chrome/i.test(navigator.userAgent),
                isFirefox: /Firefox/i.test(navigator.userAgent),
                isSafari: /Safari/i.test(navigator.userAgent) && !/Chrome/i.test(navigator.userAgent),
                date: new Date().toLocaleString()
            };
            
            document.getElementById('browserInfo').textContent = JSON.stringify(info, null, 2);
        }
        
        // URL optimizada para Edge
        function getOptimizedEmbedUrl(videoId) {
            const params = new URLSearchParams({
                rel: '0',
                modestbranding: '1',
                fs: '1',
                hl: 'es',
                autoplay: '0',
                controls: '1',
                disablekb: '0',
                enablejsapi: '1',
                iv_load_policy: '3',
                playsinline: '1',
                start: '0',
                origin: window.location.origin,
                widget_referrer: window.location.origin
            });
            
            return `https://www.youtube.com/embed/${videoId}?${params.toString()}`;
        }
        
        // Configurar iframe optimizado
        function setupOptimizedIframe() {
            const optimizedUrl = getOptimizedEmbedUrl('zzTkOM-wJpo');
            document.getElementById('optimizedUrl').textContent = optimizedUrl;
            document.getElementById('optimizedIframe').src = optimizedUrl;
        }
        
        // Manejar eventos de carga
        function setupEventHandlers() {
            const testIframe = document.getElementById('testIframe');
            const optimizedIframe = document.getElementById('optimizedIframe');
            const rickrollIframe = document.getElementById('rickrollIframe');
            
            testIframe.onload = () => {
                document.getElementById('iframeStatus').innerHTML = '‚úÖ Cargado correctamente';
                document.getElementById('statusContainer').innerHTML = '<div class="success">‚úÖ El iframe b√°sico se carg√≥ sin problemas</div>';
            };
            
            testIframe.onerror = () => {
                document.getElementById('iframeStatus').innerHTML = '‚ùå Error al cargar';
                document.getElementById('statusContainer').innerHTML = '<div class="error">‚ùå Error al cargar el iframe b√°sico</div>';
            };
            
            optimizedIframe.onload = () => {
                document.getElementById('optimizedStatus').innerHTML = '‚úÖ Cargado correctamente';
            };
            
            optimizedIframe.onerror = () => {
                document.getElementById('optimizedStatus').innerHTML = '‚ùå Error al cargar';
            };
            
            rickrollIframe.onload = () => {
                document.getElementById('rickrollStatus').innerHTML = '‚úÖ Cargado correctamente';
            };
            
            rickrollIframe.onerror = () => {
                document.getElementById('rickrollStatus').innerHTML = '‚ùå Error al cargar';
            };
        }
        
        // Funciones de control
        function reloadIframe() {
            const iframe = document.getElementById('testIframe');
            document.getElementById('iframeStatus').innerHTML = '‚è≥ Recargando...';
            iframe.src = iframe.src;
        }
        
        function openInNewTab() {
            window.open('https://www.youtube.com/watch?v=zzTkOM-wJpo', '_blank');
        }
        
        function testDifferentUrl() {
            const iframe = document.getElementById('testIframe');
            document.getElementById('iframeStatus').innerHTML = '‚è≥ Probando URL nocookie...';
            iframe.src = 'https://www.youtube-nocookie.com/embed/zzTkOM-wJpo';
        }
        
        // Timeout para detectar problemas
        setTimeout(() => {
            const statusElement = document.getElementById('iframeStatus');
            if (statusElement.innerHTML.includes('‚è≥')) {
                statusElement.innerHTML = '‚ö†Ô∏è Timeout - Posible problema de carga';
                document.getElementById('statusContainer').innerHTML = '<div class="error">‚ö†Ô∏è El iframe no se carg√≥ en 10 segundos. Esto puede indicar un problema de compatibilidad del navegador.</div>';
            }
        }, 10000);
        
        // Inicializar
        document.addEventListener('DOMContentLoaded', () => {
            updateBrowserInfo();
            setupOptimizedIframe();
            setupEventHandlers();
        });
    </script>
</body>
</html>
